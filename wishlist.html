<!-- wishlist.html: P√°gina donde el usuario ve y gestiona sus plantas favoritas -->
<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Configuraci√≥n base del documento y vista responsive -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- T√≠tulo que se muestra en la pesta√±a del navegador -->
  <title>Mis favoritos - Vivero Nuevo Renacer</title>

  <!-- Icono de favicon -->
   <link rel="icon" type="image/png" href="images/iconoviveroo.png">
   
  <!-- Descripci√≥n corta para buscadores (SEO) -->
  <meta name="description" content="Tu lista de plantas favoritas en Vivero La Ceiba." />

  <!-- Bootstrap + Icons: estilos base y set de iconos -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Estilos globales + estilos puntuales para la wishlist -->
  <link rel="stylesheet" href="css/estilos.css">
  <style>
    .wishlist-hero{background:#eaf8f0;padding:32px 0}
    .empty-card{max-width:420px;background:#fff;border-radius:16px;padding:24px;box-shadow:0 4px 14px rgba(0,0,0,.08)}
    .empty-emoji{font-size:48px}
    .wish-card img{height:200px;object-fit:cover}
  </style>
</head>
<body>

  <!-- Navbar principal-->
<!-- Navbar (misma que cat√°logo, sin "Mi perfil") -->
<nav class="navbar navbar-expand-lg navbar-dark shadow-sm">
  <div class="container">
    <!-- Marca del vivero (logo + texto) que redirige al inicio -->
    <a class="navbar-brand d-flex align-items-center gap-2" href="index.html">
      <img
        src="images/iconovivero.png"
        alt="Vivero Nuevo Renacer"
        class="brand-logo"
        loading="eager"
        decoding="async"
      />
      <span>Vivero Nuevo Renacer</span>
    </a>

    <!-- Bot√≥n hamburguesa para mostrar/ocultar men√∫ en m√≥viles -->
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarNav" aria-controls="navbarNav"
            aria-expanded="false" aria-label="Mostrar navegaci√≥n">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Enlaces de la navegaci√≥n -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
        <!-- Link a la p√°gina de inicio -->
        <li class="nav-item"><a class="nav-link" href="index.html">Inicio</a></li>
        <!-- Cat√°logo (aqu√≠ sin .active porque estamos en wishlist) -->
        <li class="nav-item"><a class="nav-link" href="catalogo.html">Cat√°logo</a></li>
        <!-- Enlaces que hacen scroll a secciones del inicio -->
        <li class="nav-item"><a class="nav-link" href="index.html#contacto">Contacto</a></li>
        <li class="nav-item"><a class="nav-link" href="index.html#ubicacion">Ubicaci√≥n</a></li>

        <!-- Carrito (pen√∫ltimo) -->
        <li class="nav-item">
          <button class="btn btn-light position-relative"
                  data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart" aria-controls="offcanvasCart">
            <i class="bi bi-bag"></i>
            <!-- Badge con el contador de √≠tems en el carrito -->
            <span id="cart-count" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
          </button>
        </li>

        <!-- Botones si NO hay sesi√≥n -->
        <li id="nav-auth-only" class="nav-item d-flex gap-2">
          <a class="btn btn-light" href="login.html">Iniciar sesi√≥n</a>
          <a class="btn btn-outline-light" href="registro.html">Registrarse</a>
        </li>

        <!-- Perfil (√∫ltimo a la derecha) | orden: icono ‚Üí nombre ‚Üí flecha -->
        <li id="nav-profile" class="nav-item dropdown d-none ms-lg-2">
          <a class="nav-link dropdown-toggle no-caret d-flex align-items-center gap-2 nav-profile-trigger"
             href="#" role="button"
             data-bs-toggle="dropdown"
             data-bs-display="static"
             aria-expanded="false">
            <i class="bi bi-person-circle fs-5"></i>
            <span id="nav-username" class="d-none d-lg-inline">Mi perfil</span>
            <i class="bi bi-caret-down-fill"></i>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <!-- OJO: aqu√≠ ya NO est√° "Mi perfil" -->
            <li>
              <a class="dropdown-item d-flex align-items-center gap-2" href="wishlist.html">
                <i class="bi bi-heart"></i> Mis favoritos
              </a>
            </li>
            <li>
              <a class="dropdown-item d-flex align-items-center gap-2 d-none" id="nav-admin" href="admin.html">
                <i class="bi bi-speedometer2"></i> Panel administrador
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <button class="dropdown-item text-danger d-flex align-items-center gap-2" id="btn-logout" type="button">
                <i class="bi bi-box-arrow-right"></i> Cerrar sesi√≥n
              </button>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>



  <!-- Encabezado de la p√°gina de favoritos -->
  <header class="wishlist-hero">
    <div class="container text-center">
      <h1 class="h3 mb-1">Mis favoritos</h1>
      <p class="text-muted mb-0">Guarda aqu√≠ las plantas que te encantan üå±</p>
    </div>
  </header>

  <!-- Contenido principal de la lista de deseos -->
  <main class="container my-4">
    <!-- Aviso cuando el usuario no ha iniciado sesi√≥n -->
    <div id="needLogin" class="alert alert-warning d-none">
      Debes iniciar sesi√≥n para ver tu lista de favoritos. <a href="login.html" class="alert-link">Ir al login</a>.
    </div>

    <!-- Barra superior con total de elementos y acci√≥n de vaciar la lista -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <span class="small text-muted"><strong id="wish-total">0</strong> elementos</span>
      <button id="btnClearWish" class="btn btn-link text-danger p-0 small">Vaciar lista</button>
    </div>

    <!-- Grid donde se renderizan las tarjetas de favoritos desde JS -->
    <div id="wishGrid" class="row g-3"></div>

    <!-- Estado vac√≠o: lo muestro cuando el usuario no tiene favoritos guardados -->
    <section id="wishEmpty" class="text-center py-5 d-none">
      <div class="empty-card mx-auto">
        <div class="empty-emoji">ü§ç</div>
        <h2 class="h5 mb-2">Tu lista est√° vac√≠a</h2>
        <p class="text-muted mb-3">Explora el cat√°logo y a√±ade tus favoritas con el coraz√≥n.</p>
        <a href="catalogo.html" class="btn btn-custom">Ir al cat√°logo</a>
      </div>
    </section>
  </main>


 <!-- Offcanvas Carrito: panel lateral para ver y enviar el pedido -->
 <div class="offcanvas offcanvas-end"
     tabindex="-1"
     id="offcanvasCart"
     aria-labelledby="offcanvasCartLabel"
     data-bs-scroll="true"
     data-bs-backdrop="false">
  <div class="offcanvas-header">
    <h5 id="offcanvasCartLabel">Tu carrito</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
  </div>
  <div class="offcanvas-body d-flex flex-column">
    <!-- Lista de productos a√±adidos al carrito (se rellena por JS) -->
    <ul id="cart-list" class="list-group mb-3"></ul>
    <div class="d-flex justify-content-between align-items-center">
      <strong>Total:</strong>
      <span id="cart-total">$0</span>
    </div>
    <hr />
    <!-- Bot√≥n para generar el mensaje y enviar el pedido por WhatsApp -->
    <button id="btnCartWhatsApp"
        class="btn btn-custom w-100"
        type="button"
        data-phone="+57 321 926 1465">
  <i class="bi bi-whatsapp me-2"></i>Enviar pedido por WhatsApp
</button>
  </div>
</div>

  <!-- Toasts: notificaci√≥n cuando se a√±ade algo al carrito desde favoritos -->
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index:1100;">
    <div id="toast-added" class="toast align-items-center border-0" role="status" aria-live="polite" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body">Producto a√±adido al carrito. üåø</div>
        <button type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
      </div>
    </div>
  </div>

  <!-- Scripts: Bootstrap + l√≥gica global + l√≥gica espec√≠fica de wishlist -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/app.js"></script>
  <script src="js/wishlist.js"></script>
</body>
</html>
